@namespace MyPlans.Components.PlansComponents
<MudText Typo="Typo.h6">Add a new Plan</MudText>
<MudPaper Class="py-4 px-4">
	<EditForm Model="_model" OnValidSubmit="SubmitFormAsync">
		<FluentValidationValidator />

<MudTextField Label="Title" Variant="Variant.Outlined" HelperText="Required" @bind-Value=@_model.Title/>
		<MudTextField Label="Description" Variant="Variant.Outlined"  HelperText="Optional" @bind-Value="@_model.Description" Lines="4" />
<InputFile id="fileInput" OnChange="OnChooseFileAsync" hidden multiple />
		<MudFab HtmlTag="label"
				Color="Color.Secondary"
				Icon="@Icons.Filled.Image"
				Label="LoadPicture"
				for="fileInput" />

		@if (_isEditMode)
		{
			<img src="@_model.CoverUrl" style="width:70%;" class="m-2" />
		}
		
		@if (_stream != null)
		{
			<MudText Typo="Typo.subtitle2">@_fileName</MudText>
		}

		@if (string.IsNullOrWhiteSpace(_errorMessage))
		{
			<MudAlert Severity="Severity.Error" Variant="Variant.Filled" Class="my-2">@_errorMessage</MudAlert>
		}

		<MudDivider DividerType="DividerType.FullWidth" Class="my-2" />

		<ValidationSummary />

		<MudButton Color="Color.Primary" Variant="Variant.Filled" ButtonType="ButtonType.Submit" FullWidth="true" Disabled="_isBusy">Save</MudButton>
	</EditForm>
	</MudPaper>


@code {

}
